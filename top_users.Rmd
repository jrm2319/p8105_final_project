---
title: "top_users"
author: "Samiha Reza"
date: "2024-12-03"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r data_1}
users_ratings <- ratings %>%
  group_by(user_id) %>%
  summarize(total_ratings = n(), .groups = 'drop') %>%
  arrange(desc(total_ratings))


to_read_counts <- to_read %>%
  group_by(user_id) %>%
  summarize(total_to_read = n(), .groups = 'drop') %>%
  arrange(desc(total_to_read))

total_ratings_info <- left_join(users_ratings, to_read_counts, by = c("user_id"))
```

```{r ratings_users}

top_user_ids_rat <- users_ratings %>%
  head(15)

top_ratings <- semi_join(ratings, top_user_ids_rat, by = c("user_id"))
# Things to do: Look at average rating for top 15 users, look at most common genres rated for each user (use pie chart)

avg_rat <-top_ratings %>%
  group_by(user_id) %>%  
  summarize(avg_rating = mean(rating, na.rm = TRUE))

top_users <- left_join(top_user_ids_rat, avg_rat, by = c("user_id"))

top_ratings_genres <- semi_join(top_ratings, books_with_tags, by = c("book_id")) %>%
  select(book_id, user_id, rating, title, average_rating, top_1, top_2, top_3, top_4, top_5)
```

```{r to_read_users}
# Things to do: look at most common genres for each of the top 15 users (use pie chart?), common to_read books among top 50 users

```